---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

import MainLayout from "@/layouts/main.astro";

const tortenelem = await getCollection("tortenelem");
const magyar = await getCollection("magyar");
const matematika = await getCollection("matematika");
---

<MainLayout>
  <section>
    <ul class="grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6">
      {
        [
          {
            title: "Történelem",
            type: "tortenelem",
            theses: tortenelem,
          },
          {
            title: "Magyar",
            type: "magyar",
            theses: magyar,
          },
          {
            title: "Matematika",
            type: "matematika",
            theses: matematika,
          },
        ].map(({ title, type, theses }) => (
          <li>
            <a
              class="flex flex-col gap-4 items-start hover:opacity-80 transition-opacity"
              href={`/${type}`}
            >
              <div class="aspect-video w-full bg-muted rounded-md overflow-hidden shrink-0 shadow-md dark:shadow-none">
                <Image
                  class="rounded-[inherit] aspect-[inherit] object-cover"
                  width={1020}
                  height={510}
                  src={import(`../assets/${type}/cover.jpg`)}
                  alt=""
                  draggable={false}
                />
              </div>
              <div class="flex flex-col min-w-0 flex-1">
                <h1 class="font-medium text-lg">{title}</h1>
                <p class="text-muted-foreground text-sm tabular-nums">
                  {theses.length} darab
                </p>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</MainLayout>
